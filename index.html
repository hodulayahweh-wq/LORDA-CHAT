<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lord AI Singularity</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg:#0f0f17;
      --surface:#1a1f2e;
      --text:#e0e7ff;
      --accent:#7c3aed;
      --user:#4f46e5;
      --error:#ef4444;
    }

    body {
      margin:0;
      font-family:'Inter',sans-serif;
      background:var(--bg);
      color:var(--text);
      min-height:100vh;
      display:flex;
      flex-direction:column;
    }

    header {
      padding:1rem;
      background:var(--surface);
      text-align:center;
      border-bottom:1px solid #2d3748;
    }

    .logo {
      font-size:1.6rem;
      font-weight:700;
      color:var(--accent);
    }

    main {
      flex:1;
      max-width:900px;
      margin:auto;
      width:100%;
      padding:1rem;
      display:flex;
      flex-direction:column;
    }

    #messages {
      flex:1;
      overflow-y:auto;
      display:flex;
      flex-direction:column;
      gap:1rem;
    }

    .message {
      max-width:90%;
      padding:1rem 1.2rem;
      border-radius:1.2rem;
      line-height:1.5;
    }

    .message.user {
      align-self:flex-end;
      background:var(--user);
      color:#fff;
      border-bottom-right-radius:0.4rem;
    }

    .message.ai {
      align-self:flex-start;
      background:var(--surface);
      border:1px solid #2d3748;
      border-bottom-left-radius:0.4rem;
    }

    .message.error {
      align-self:center;
      background:rgba(239,68,68,0.15);
      color:var(--error);
      border:1px solid rgba(239,68,68,0.4);
    }

    .input-area {
      display:flex;
      gap:.6rem;
      margin-top:1rem;
    }

    #input {
      flex:1;
      padding:.9rem 1.2rem;
      border-radius:999px;
      border:1px solid #2d3748;
      background:#000;
      color:#fff;
      font-size:1rem;
    }

    #send {
      padding:.9rem 1.6rem;
      border:none;
      border-radius:999px;
      background:var(--accent);
      color:#fff;
      font-weight:600;
      cursor:pointer;
    }

    footer {
      padding:1rem;
      text-align:center;
      background:var(--surface);
      border-top:1px solid #2d3748;
    }

    footer a {
      color:var(--accent);
      margin:0 1rem;
      text-decoration:none;
    }
  </style>
</head>
<body>

<header>
  <div class="logo">Lord AI Singularity</div>
</header>

<main>
  <div id="messages">
    <div class="message ai">Merhaba! Ne sormak istersin? üöÄ</div>
  </div>

  <div class="input-area">
    <input id="input" placeholder="Yaz bakalƒ±m..." autocomplete="off">
    <button id="send">G√∂nder</button>
  </div>
</main>

<footer>
  <a href="https://t.me/lordsystemv3" target="_blank">üì¢ Kanal</a>
  <a href="https://t.me/LordDestekHat" target="_blank">üõ†Ô∏è Destek</a>
</footer>

<script>
  const API_URL = "https://lordageichatsohbet.onrender.com/api";
  const API_KEY = "LORD-BB8B7004";

  const messages = document.getElementById("messages");
  const input = document.getElementById("input");
  const sendBtn = document.getElementById("send");

  function addMessage(text, type) {
    const div = document.createElement("div");
    div.className = "message " + type;
    div.innerHTML = text.replace(/\n/g, "<br>");
    messages.appendChild(div);
    messages.scrollTop = messages.scrollHeight;
  }

  async function sendMessage() {
    const query = input.value.trim();
    if (!query) return;

    addMessage(query, "user");
    input.value = "";
    sendBtn.disabled = true;

    const loading = document.createElement("div");
    loading.className = "message ai";
    loading.textContent = "Cevap hazƒ±rlanƒ±yor...";
    messages.appendChild(loading);

    try {
      const url = API_URL + "?key=" + API_KEY + "&q=" + encodeURIComponent(query);
      const res = await fetch(url, { cache: "no-store" });

      if (!res.ok) throw new Error("HTTP " + res.status);

      const raw = await res.text();
      const clean = raw.replace(/^\uFEFF/, "").trim();
      const data = JSON.parse(clean);

      loading.remove();

      if (data.response) {
        addMessage(data.response, "ai");
      } else {
        addMessage("VERƒ∞ YOK üí•", "error");
      }

    } catch (e) {
      loading.remove();
      addMessage("Sunucuya ula≈üƒ±lamadƒ±", "error");
    }

    sendBtn.disabled = false;
    input.focus();
  }

  sendBtn.onclick = sendMessage;
  input.addEventListener("keydown", e => {
    if (e.key === "Enter") sendMessage();
  });
</script>

</body>
</html>
